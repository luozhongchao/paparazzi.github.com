<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Paparazzi UAS: sw/airborne/arch/stm32/mcu_periph/spi_arch.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Paparazzi UAS
   &#160;<span id="projectnumber">v4.9_devel-402-gd5fd5f9</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('stm32_2mcu__periph_2spi__arch_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">spi_arch.c File Reference<div class="ingroups"><a class="el" href="group__stm32__arch.html">STM32 architecture</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Handling of SPI hardware for STM32.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;libopencm3/stm32/f1/nvic.h&gt;</code><br/>
<code>#include &lt;libopencm3/stm32/f1/gpio.h&gt;</code><br/>
<code>#include &lt;libopencm3/stm32/f1/rcc.h&gt;</code><br/>
<code>#include &lt;libopencm3/stm32/exti.h&gt;</code><br/>
<code>#include &lt;libopencm3/stm32/spi.h&gt;</code><br/>
<code>#include &lt;libopencm3/stm32/f1/dma.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="spi_8h_source.html">mcu_periph/spi.h</a>&quot;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for spi_arch.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="stm32_2mcu__periph_2spi__arch_8c__incl.png" border="0" usemap="#sw_2airborne_2arch_2stm32_2mcu__periph_2spi__arch_8c" alt=""/></div>
<map name="sw_2airborne_2arch_2stm32_2mcu__periph_2spi__arch_8c" id="sw_2airborne_2arch_2stm32_2mcu__periph_2spi__arch_8c">
<area shape="rect" id="node15" href="spi_8h.html" title="Architecture independent SPI (Serial Peripheral Interface) API." alt="" coords="1131,111,1261,140"/></map>
</div>
</div>
<p><a href="stm32_2mcu__periph_2spi__arch_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspi__periph__dma.html">spi_periph_dma</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure keeps track of specific ID's for each SPI bus, which allows for more code reuse.  <a href="structspi__periph__dma.html#details">More...</a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a36b52cd82ac80095040ec2ceefef4f70"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a36b52cd82ac80095040ec2ceefef4f70"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE0_PERIPH</b>&#160;&#160;&#160;RCC_APB2ENR_IOPAEN</td></tr>
<tr class="memitem:a62cb06db3908015c7305ca6833f90159"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a62cb06db3908015c7305ca6833f90159"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE0_PORT</b>&#160;&#160;&#160;GPIOA</td></tr>
<tr class="memitem:a697b8e633c428bd167844542c8c1453f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a697b8e633c428bd167844542c8c1453f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE0_PIN</b>&#160;&#160;&#160;GPIO15</td></tr>
<tr class="memitem:a59bc6942e52ff561a9cfffffb30e00a2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59bc6942e52ff561a9cfffffb30e00a2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE1_PERIPH</b>&#160;&#160;&#160;RCC_APB2ENR_IOPAEN</td></tr>
<tr class="memitem:abed465f8e9387dc4c034b1d71989043c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abed465f8e9387dc4c034b1d71989043c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE1_PORT</b>&#160;&#160;&#160;GPIOA</td></tr>
<tr class="memitem:a6391f9c6d48eca04803022ab073df01a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6391f9c6d48eca04803022ab073df01a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE1_PIN</b>&#160;&#160;&#160;GPIO4</td></tr>
<tr class="memitem:adc10ae70ef3323f58bbeb2e26b356ba3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adc10ae70ef3323f58bbeb2e26b356ba3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE2_PERIPH</b>&#160;&#160;&#160;RCC_APB2ENR_IOPBEN</td></tr>
<tr class="memitem:ad1fce2206d522b24623e9b742b1f2988"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad1fce2206d522b24623e9b742b1f2988"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE2_PORT</b>&#160;&#160;&#160;GPIOB</td></tr>
<tr class="memitem:ae006e4c20f82ac5d2104debcd8615f06"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae006e4c20f82ac5d2104debcd8615f06"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE2_PIN</b>&#160;&#160;&#160;GPIO12</td></tr>
<tr class="memitem:a85be689297fe8683500c740f75d5bf90"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85be689297fe8683500c740f75d5bf90"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE3_PERIPH</b>&#160;&#160;&#160;RCC_APB2ENR_IOPCEN</td></tr>
<tr class="memitem:aaf1f83e1cd34b94de35fbbaaa7f6cb46"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf1f83e1cd34b94de35fbbaaa7f6cb46"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE3_PORT</b>&#160;&#160;&#160;GPIOC</td></tr>
<tr class="memitem:a43f488034394a3e0c0749b96fdbdd08f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43f488034394a3e0c0749b96fdbdd08f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE3_PIN</b>&#160;&#160;&#160;GPIO13</td></tr>
<tr class="memitem:ad032b13900d3d088a3f1e8cc1a7cc852"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad032b13900d3d088a3f1e8cc1a7cc852"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE4_PERIPH</b>&#160;&#160;&#160;RCC_APB2ENR_IOPCEN</td></tr>
<tr class="memitem:a68d301edae4fbbd1f4a7e9de1a9252b1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a68d301edae4fbbd1f4a7e9de1a9252b1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE4_PORT</b>&#160;&#160;&#160;GPIOC</td></tr>
<tr class="memitem:aaaf3b422873946314dfec6703a3a5580"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaaf3b422873946314dfec6703a3a5580"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SELECT_SLAVE4_PIN</b>&#160;&#160;&#160;GPIO12</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa2be57519fcaa1b2795cdd27016ff696"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa2be57519fcaa1b2795cdd27016ff696"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>spi_rw</b> (struct <a class="el" href="structspi__periph.html">spi_periph</a> *p, struct <a class="el" href="structspi__transaction.html">spi_transaction</a> *_trans)</td></tr>
<tr class="memitem:a0691bd5fba1792e012d73c002cb44a95"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0691bd5fba1792e012d73c002cb44a95"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#a0691bd5fba1792e012d73c002cb44a95">process_rx_dma_interrupt</a> (struct <a class="el" href="structspi__periph.html">spi_periph</a> *spi)</td></tr>
<tr class="memdesc:a0691bd5fba1792e012d73c002cb44a95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processing done after rx completes. <br/></td></tr>
<tr class="memitem:a28927664346f77a7fc1aeb8994b7869c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a28927664346f77a7fc1aeb8994b7869c"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#a28927664346f77a7fc1aeb8994b7869c">process_tx_dma_interrupt</a> (struct <a class="el" href="structspi__periph.html">spi_periph</a> *spi)</td></tr>
<tr class="memdesc:a28927664346f77a7fc1aeb8994b7869c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processing done after tx completes. <br/></td></tr>
<tr class="memitem:af3a0a783f898c0211f2c0e5498c746a0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af3a0a783f898c0211f2c0e5498c746a0"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>SpiSlaveUnselect</b> (uint8_t slave)</td></tr>
<tr class="memitem:ab639bd461acc9159f2a8566bfe1ebdd0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab639bd461acc9159f2a8566bfe1ebdd0"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>SpiSlaveSelect</b> (uint8_t slave)</td></tr>
<tr class="memitem:a92d285e5b860130426aa3ce1369df0c9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92d285e5b860130426aa3ce1369df0c9"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#a92d285e5b860130426aa3ce1369df0c9">spi_arch_int_enable</a> (struct <a class="el" href="structspi__periph.html">spi_periph</a> *spi)</td></tr>
<tr class="memdesc:a92d285e5b860130426aa3ce1369df0c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable DMA rx channel interrupt. <br/></td></tr>
<tr class="memitem:a42f17f52b327c1192801fc39493f43c5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a42f17f52b327c1192801fc39493f43c5"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#a42f17f52b327c1192801fc39493f43c5">spi_arch_int_disable</a> (struct <a class="el" href="structspi__periph.html">spi_periph</a> *spi)</td></tr>
<tr class="memdesc:a42f17f52b327c1192801fc39493f43c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable DMA rx channel interrupt. <br/></td></tr>
<tr class="memitem:gab8cb9f918fae47c201bf233a0b3b282f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__spi.html#gab8cb9f918fae47c201bf233a0b3b282f">spi0_arch_init</a> (void)</td></tr>
<tr class="memdesc:gab8cb9f918fae47c201bf233a0b3b282f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Architecture dependant SPI0 initialization.  <a href="group__spi.html#gab8cb9f918fae47c201bf233a0b3b282f"></a><br/></td></tr>
<tr class="memitem:gaaba00866ddaf960c0c761e61f81e5216"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__spi.html#gaaba00866ddaf960c0c761e61f81e5216">spi1_arch_init</a> (void)</td></tr>
<tr class="memdesc:gaaba00866ddaf960c0c761e61f81e5216"><td class="mdescLeft">&#160;</td><td class="mdescRight">Architecture dependant SPI1 initialization.  <a href="group__spi.html#gaaba00866ddaf960c0c761e61f81e5216"></a><br/></td></tr>
<tr class="memitem:gae6c7e2bb3fb354f3b98282386b41bf70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__spi.html#gae6c7e2bb3fb354f3b98282386b41bf70">spi2_arch_init</a> (void)</td></tr>
<tr class="memdesc:gae6c7e2bb3fb354f3b98282386b41bf70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Architecture dependant SPI2 initialization.  <a href="group__spi.html#gae6c7e2bb3fb354f3b98282386b41bf70"></a><br/></td></tr>
<tr class="memitem:gaf1bcfc102840a0e6287b4db20bd78337"><td class="memItemLeft" align="right" valign="top">bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__spi.html#gaf1bcfc102840a0e6287b4db20bd78337">spi_submit</a> (struct <a class="el" href="structspi__periph.html">spi_periph</a> *p, struct <a class="el" href="structspi__transaction.html">spi_transaction</a> *t)</td></tr>
<tr class="memdesc:gaf1bcfc102840a0e6287b4db20bd78337"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submit a spi transaction.  <a href="group__spi.html#gaf1bcfc102840a0e6287b4db20bd78337"></a><br/></td></tr>
<tr class="memitem:gafc9125c5764a6749703ae4f1303a16f3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafc9125c5764a6749703ae4f1303a16f3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__spi.html#gafc9125c5764a6749703ae4f1303a16f3">spi_init_slaves</a> (void)</td></tr>
<tr class="memdesc:gafc9125c5764a6749703ae4f1303a16f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize all used slaves and uselect them. <br/></td></tr>
<tr class="memitem:gad43916477f5d87b42eaa7d2099771568"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__spi.html#gad43916477f5d87b42eaa7d2099771568">spi_slave_select</a> (uint8_t slave)</td></tr>
<tr class="memdesc:gad43916477f5d87b42eaa7d2099771568"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select a slave.  <a href="group__spi.html#gad43916477f5d87b42eaa7d2099771568"></a><br/></td></tr>
<tr class="memitem:ga99507da72932c02e5d8daf9a7170ed69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__spi.html#ga99507da72932c02e5d8daf9a7170ed69">spi_slave_unselect</a> (uint8_t slave)</td></tr>
<tr class="memdesc:ga99507da72932c02e5d8daf9a7170ed69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unselect a slave.  <a href="group__spi.html#ga99507da72932c02e5d8daf9a7170ed69"></a><br/></td></tr>
<tr class="memitem:ga2db1b869a8aea431e3d3e63106290db9"><td class="memItemLeft" align="right" valign="top">bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__spi.html#ga2db1b869a8aea431e3d3e63106290db9">spi_lock</a> (struct <a class="el" href="structspi__periph.html">spi_periph</a> *p, uint8_t slave)</td></tr>
<tr class="memdesc:ga2db1b869a8aea431e3d3e63106290db9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the SPI fifo.  <a href="group__spi.html#ga2db1b869a8aea431e3d3e63106290db9"></a><br/></td></tr>
<tr class="memitem:ga5e9947e5b87e3a86a773b4a174ec6f08"><td class="memItemLeft" align="right" valign="top">bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__spi.html#ga5e9947e5b87e3a86a773b4a174ec6f08">spi_resume</a> (struct <a class="el" href="structspi__periph.html">spi_periph</a> *p, uint8_t slave)</td></tr>
<tr class="memdesc:ga5e9947e5b87e3a86a773b4a174ec6f08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume the SPI fifo.  <a href="group__spi.html#ga5e9947e5b87e3a86a773b4a174ec6f08"></a><br/></td></tr>
<tr class="memitem:acd9d029906e9ca7ca590bf6766de6368"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd9d029906e9ca7ca590bf6766de6368"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#acd9d029906e9ca7ca590bf6766de6368">dma1_channel2_isr</a> (void)</td></tr>
<tr class="memdesc:acd9d029906e9ca7ca590bf6766de6368"><td class="mdescLeft">&#160;</td><td class="mdescRight">receive transferred over DMA <br/></td></tr>
<tr class="memitem:a6abe8340eace6d5c19e4f722cd290a0a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6abe8340eace6d5c19e4f722cd290a0a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#a6abe8340eace6d5c19e4f722cd290a0a">dma1_channel3_isr</a> (void)</td></tr>
<tr class="memdesc:a6abe8340eace6d5c19e4f722cd290a0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">transmit transferred over DMA <br/></td></tr>
<tr class="memitem:ac13fd4f156b4a88afac6d174103a88a8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac13fd4f156b4a88afac6d174103a88a8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#ac13fd4f156b4a88afac6d174103a88a8">dma1_channel4_isr</a> (void)</td></tr>
<tr class="memdesc:ac13fd4f156b4a88afac6d174103a88a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">receive transferred over DMA <br/></td></tr>
<tr class="memitem:ad26a5c303d0c6a60f586099c85109e9d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad26a5c303d0c6a60f586099c85109e9d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#ad26a5c303d0c6a60f586099c85109e9d">dma1_channel5_isr</a> (void)</td></tr>
<tr class="memdesc:ad26a5c303d0c6a60f586099c85109e9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">transmit transferred over DMA <br/></td></tr>
<tr class="memitem:a2ed33a829d80508c811ad7b38fd1f4a1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2ed33a829d80508c811ad7b38fd1f4a1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#a2ed33a829d80508c811ad7b38fd1f4a1">dma2_channel1_isr</a> (void)</td></tr>
<tr class="memdesc:a2ed33a829d80508c811ad7b38fd1f4a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">receive transferred over DMA <br/></td></tr>
<tr class="memitem:a790d44453472c9b63d20f315425b4e37"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a790d44453472c9b63d20f315425b4e37"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html#a790d44453472c9b63d20f315425b4e37">dma2_channel2_isr</a> (void)</td></tr>
<tr class="memdesc:a790d44453472c9b63d20f315425b4e37"><td class="mdescLeft">&#160;</td><td class="mdescRight">transmit transferred over DMA <br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a7d8ebbd3680a7fc3e33eaf638f396c18"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7d8ebbd3680a7fc3e33eaf638f396c18"></a>
static struct <a class="el" href="structspi__periph__dma.html">spi_periph_dma</a>&#160;</td><td class="memItemRight" valign="bottom"><b>spi0_dma</b></td></tr>
<tr class="memitem:a1fcd46a62bab151ce1f91b72cdbe3568"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1fcd46a62bab151ce1f91b72cdbe3568"></a>
static struct <a class="el" href="structspi__periph__dma.html">spi_periph_dma</a>&#160;</td><td class="memItemRight" valign="bottom"><b>spi1_dma</b></td></tr>
<tr class="memitem:a3ef76c50f4063e0bd8f6ad418ceb8d59"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ef76c50f4063e0bd8f6ad418ceb8d59"></a>
static struct <a class="el" href="structspi__periph__dma.html">spi_periph_dma</a>&#160;</td><td class="memItemRight" valign="bottom"><b>spi2_dma</b></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Handling of SPI hardware for STM32. </p>
<p>SPI Master code.</p>
<p>This file manages the SPI implementation how it appears to the chip. The public "API" that is used across the modules has different ideas about the numbers used in the spi structures (<a class="el" href="structspi__periph.html">spi_periph</a>).</p>
<p>This means that from the outside, a <a class="el" href="structspi__periph.html">spi_periph</a> 2 may be mapped to SPI2, even though it's not the primary spi peripheral to use. Alternatively, it may as well be spi0 (<a class="el" href="spi_8c.html" title="Architecture independent SPI (Serial Peripheral Interface) API.">mcu_periph/spi.c</a>) which connects to the IMU (SPI2), instead of spi2.</p>
<p>See the "spix_arch_init()" functions to see where the mapping occurs.</p>
<p>This does require modifications in the makefiles, because the correct arch_init needs to be called for the selection of aspirin v2.1 for example. </p>

<p>Definition in file <a class="el" href="stm32_2mcu__periph_2spi__arch_8c_source.html">spi_arch.c</a>.</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_fc6475eb39ea0144fb6697b809fd11a9.html">arch</a></li><li class="navelem"><a class="el" href="dir_ebfa5059daba0d85a68f1520147b1a51.html">stm32</a></li><li class="navelem"><a class="el" href="dir_0722e4cfffe4ffd4c81bbc7e5d686ba4.html">mcu_periph</a></li><li class="navelem"><a class="el" href="stm32_2mcu__periph_2spi__arch_8c.html">spi_arch.c</a></li>
    <li class="footer">Generated on Thu Jan 17 2013 14:39:37 for Paparazzi UAS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
