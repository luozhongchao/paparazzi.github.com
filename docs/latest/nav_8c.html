<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Paparazzi UAS: sw/airborne/subsystems/nav.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Paparazzi UAS
   &#160;<span id="projectnumber">v4.9_devel-402-gd5fd5f9</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nav_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">nav.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Regroup functions to compute navigation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;math.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="nav_8h_source.html">subsystems/nav.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="gps_8h_source.html">subsystems/gps.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fixedwing_2stabilization_2stabilization__attitude_8h_source.html">firmwares/fixedwing/stabilization/stabilization_attitude.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fixedwing_2autopilot_8h_source.html">firmwares/fixedwing/autopilot.h</a>&quot;</code><br/>
<code>#include &quot;inter_mcu.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="traffic__info_8h_source.html">subsystems/navigation/traffic_info.h</a>&quot;</code><br/>
<code>#include &quot;generated/flight_plan.h&quot;</code><br/>
<code>#include &quot;subsystems/navigation/common_nav.c&quot;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for nav.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c__incl.png" border="0" usemap="#sw_2airborne_2subsystems_2nav_8c" alt=""/></div>
<map name="sw_2airborne_2subsystems_2nav_8c" id="sw_2airborne_2subsystems_2nav_8c">
<area shape="rect" id="node5" href="nav_8h.html" title="Navigation library." alt="" coords="1403,111,1539,140"/><area shape="rect" id="node65" href="gps_8h.html" title="Device independent GPS code (interface)" alt="" coords="891,311,1029,340"/><area shape="rect" id="node78" href="fixedwing_2stabilization_2stabilization__attitude_8h.html" title="Fixed wing horizontal control." alt="" coords="1824,293,2005,357"/><area shape="rect" id="node85" href="fixedwing_2autopilot_8h.html" title="Fixedwing autopilot modes." alt="" coords="1575,302,1721,349"/><area shape="rect" id="node92" href="inter__mcu_8h_source.html" title="inter_mcu.h" alt="" coords="1847,111,1945,140"/><area shape="rect" id="node94" href="traffic__info_8h.html" title="Informations relative to the other aircrafts." alt="" coords="1969,102,2137,149"/><area shape="rect" id="node98" href="common__nav_8c_source.html" title="subsystems/navigation\l/common_nav.c" alt="" coords="876,102,1044,149"/><area shape="rect" id="node9" href="paparazzi_8h_source.html" title="paparazzi.h" alt="" coords="1867,415,1963,444"/><area shape="rect" id="node13" href="state_8h.html" title="API to get/set the generic vehicle states." alt="" coords="800,311,867,340"/><area shape="rect" id="node54" href="nav__survey__rectangle_8h_source.html" title="subsystems/navigation\l/nav_survey_rectangle.h" alt="" coords="1383,198,1559,245"/><area shape="rect" id="node57" href="common__flight__plan_8h_source.html" title="subsystems/navigation\l/common_flight_plan.h" alt="" coords="1383,302,1551,349"/><area shape="rect" id="node60" href="common__nav_8h_source.html" title="subsystems/navigation\l/common_nav.h" alt="" coords="997,198,1165,245"/><area shape="rect" id="node11" href="inttypes_8h_source.html" title="inttypes.h" alt="" coords="1753,511,1839,540"/><area shape="rect" id="node15" href="pprz__algebra__int_8h.html" title="Paparazzi fixed point algebra." alt="" coords="608,511,787,540"/><area shape="rect" id="node31" href="pprz__algebra__float_8h.html" title="Paparazzi floating point algebra." alt="" coords="147,511,336,540"/><area shape="rect" id="node36" href="pprz__geodetic__int_8h.html" title="Paparazzi fixed point math for geodetic calculations." alt="" coords="491,406,640,453"/><area shape="rect" id="node42" href="pprz__geodetic__float_8h.html" title="Paparazzi floating point math for geodetic calculations." alt="" coords="317,406,467,453"/><area shape="rect" id="node47" href="pprz__orientation__conversion_8h.html" title="Generic orientation representation and conversion." alt="" coords="664,406,827,453"/><area shape="rect" id="node18" href="pprz__algebra_8h_source.html" title="math/pprz_algebra.h" alt="" coords="197,597,352,627"/><area shape="rect" id="node25" href="pprz__trig__int_8h_source.html" title="math/pprz_trig_int.h" alt="" coords="587,597,736,627"/><area shape="rect" id="node38" href="pprz__geodetic_8h_source.html" title="pprz_geodetic.h" alt="" coords="411,511,533,540"/><area shape="rect" id="node69" href="sys__time_8h.html" title="Architecture independent timing functions." alt="" coords="1213,415,1384,444"/></map>
</div>
</div>
<p><a href="nav_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a291c0fda2fd988bf5f602f56157ab2b7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a291c0fda2fd988bf5f602f56157ab2b7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NAV_C</b></td></tr>
<tr class="memitem:ac3892fe123b99e805c0c5d5b1b4cd144"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3892fe123b99e805c0c5d5b1b4cd144"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RCLost</b>()&#160;&#160;&#160;bit_is_set(fbw_state-&gt;status, RADIO_REALLY_LOST)</td></tr>
<tr class="memitem:ae41368935fe1a9081b0c663d37f227e0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae41368935fe1a9081b0c663d37f227e0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NAV_GLIDE_PITCH_TRIM</b>&#160;&#160;&#160;0.</td></tr>
<tr class="memitem:ac654524aa60945f0eab4bed7521c3011"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac654524aa60945f0eab4bed7521c3011"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PowerVoltage</b>()&#160;&#160;&#160;(<a class="el" href="fixedwing_2autopilot_8h.html#a32da1e6e29634773a0e491df93f92414">vsupply</a>/10.)</td></tr>
<tr class="memitem:a7c6d9ca050122212a8a269e08f8c23f2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c6d9ca050122212a8a269e08f8c23f2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RcRoll</b>(travel)&#160;&#160;&#160;(fbw_state-&gt;channels[RADIO_ROLL]* (float)travel /(float)MAX_PPRZ)</td></tr>
<tr class="memitem:a17976ef29f2f34221836e877f4712d19"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17976ef29f2f34221836e877f4712d19"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIN_DX</b>&#160;&#160;&#160;((int16_t)(MAX_PPRZ * 0.05))</td></tr>
<tr class="memitem:aa7303abf34661cdf531cce2f4fddfe86"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>NavGlide</b>(_last_wp, _wp)</td></tr>
<tr class="memitem:ab1ea324968aaab7cb5e252bd5f22e76c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1ea324968aaab7cb5e252bd5f22e76c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_DIST_CARROT</b>&#160;&#160;&#160;250.</td></tr>
<tr class="memitem:aa39efd810919cc75b7892bd6e6e37b44"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa39efd810919cc75b7892bd6e6e37b44"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIN_HEIGHT_CARROT</b>&#160;&#160;&#160;50.</td></tr>
<tr class="memitem:a34e95d63fe245178d74b11e75a53811d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a34e95d63fe245178d74b11e75a53811d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_HEIGHT_CARROT</b>&#160;&#160;&#160;150.</td></tr>
<tr class="memitem:a2a52a892a193bd2f3d2f86d1b1ded87e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>Goto3D</b>(radius)</td></tr>
<tr class="memitem:a8691e5b760e30c9091d5a981d3663441"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8691e5b760e30c9091d5a981d3663441"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NavFollow</b>(_ac_id, _distance, _height)&#160;&#160;&#160;nav_follow(_ac_id, _distance, _height);</td></tr>
<tr class="memitem:a86a682e52e440368e6ca96062ef7563f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a86a682e52e440368e6ca96062ef7563f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LINE_START_FUNCTION</b>&#160;&#160;&#160;{}</td></tr>
<tr class="memitem:a2788d8683c98c074cb18680dc2eea0af"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2788d8683c98c074cb18680dc2eea0af"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LINE_STOP_FUNCTION</b>&#160;&#160;&#160;{}</td></tr>
<tr class="memitem:abb778e487ebe98aedea7858361496264"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb778e487ebe98aedea7858361496264"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FAILSAFE_HOME_RADIUS</b>&#160;&#160;&#160;DEFAULT_CIRCLE_RADIUS</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aab42b8493c217be79eb8f2523b6aed32"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>eight_status</b> { <br/>
&#160;&#160;<b>R1T</b>, 
<b>RT2</b>, 
<b>C2</b>, 
<b>R2T</b>, 
<br/>
&#160;&#160;<b>RT1</b>, 
<b>C1</b>
<br/>
 }</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2580ee456d7dd3d157fd7c43ad2eac2d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2580ee456d7dd3d157fd7c43ad2eac2d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>nav_init_stage</b> (void)</td></tr>
<tr class="memitem:ad1b9d2e8da4a32477ca8bedc0bca86fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#ad1b9d2e8da4a32477ca8bedc0bca86fe">nav_circle_XY</a> (float x, float y, float radius)</td></tr>
<tr class="memdesc:ad1b9d2e8da4a32477ca8bedc0bca86fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Navigates around (x, y).  <a href="#ad1b9d2e8da4a32477ca8bedc0bca86fe"></a><br/></td></tr>
<tr class="memitem:a51583ee86b14f2a389b28f2641c4e010"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a51583ee86b14f2a389b28f2641c4e010"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>nav_follow</b> (uint8_t _ac_id, float _distance, float _height)</td></tr>
<tr class="memitem:ad18f254456d7f982064ea9e36b29ed93"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad18f254456d7f982064ea9e36b29ed93"></a>
static bool_t&#160;</td><td class="memItemRight" valign="bottom"><b>nav_compute_baseleg</b> (uint8_t wp_af, uint8_t wp_td, uint8_t wp_baseleg, float radius)</td></tr>
<tr class="memitem:a7a738c44a399a9103371dc53dfabc9dc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7a738c44a399a9103371dc53dfabc9dc"></a>
static bool_t&#160;</td><td class="memItemRight" valign="bottom"><b>nav_compute_final_from_glide</b> (uint8_t wp_af, uint8_t wp_td, float glide)</td></tr>
<tr class="memitem:ad9cc0030bdcfa2192dda22875ca68934"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad9cc0030bdcfa2192dda22875ca68934"></a>
static bool_t&#160;</td><td class="memItemRight" valign="bottom"><b>compute_TOD</b> (uint8_t _af, uint8_t _td, uint8_t _tod, float glide_airspeed, float glide_vspeed)</td></tr>
<tr class="memitem:a771b907350b836982ba4e31fd4bcbf4b"><td class="memItemLeft" align="right" valign="top">bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#a771b907350b836982ba4e31fd4bcbf4b">nav_approaching_xy</a> (float x, float y, float from_x, float from_y, float approaching_time)</td></tr>
<tr class="memdesc:a771b907350b836982ba4e31fd4bcbf4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decide if the UAV is approaching the current waypoint.  <a href="#a771b907350b836982ba4e31fd4bcbf4b"></a><br/></td></tr>
<tr class="memitem:ae9d11d2e378b23ecbee86419cbf341f0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae9d11d2e378b23ecbee86419cbf341f0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#ae9d11d2e378b23ecbee86419cbf341f0">fly_to_xy</a> (float x, float y)</td></tr>
<tr class="memdesc:ae9d11d2e378b23ecbee86419cbf341f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes <em>desired_x</em>, <em>desired_y</em> and <em>desired_course</em>. <br/></td></tr>
<tr class="memitem:ab4247c9f3dc0417690e1404add032cbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#ab4247c9f3dc0417690e1404add032cbe">nav_route_xy</a> (float last_wp_x, float last_wp_y, float wp_x, float wp_y)</td></tr>
<tr class="memdesc:ab4247c9f3dc0417690e1404add032cbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the carrot position along the desired segment.  <a href="#ab4247c9f3dc0417690e1404add032cbe"></a><br/></td></tr>
<tr class="memitem:afe6d4a5dd1de94f57126d27a6baac58f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe6d4a5dd1de94f57126d27a6baac58f"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>nav_set_altitude</b> (void)</td></tr>
<tr class="memitem:a069e6b8f68b2e117cbbe03f29e30a2e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#a069e6b8f68b2e117cbbe03f29e30a2e3">nav_home</a> (void)</td></tr>
<tr class="memdesc:a069e6b8f68b2e117cbbe03f29e30a2e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Home mode navigation (circle around HOME)  <a href="#a069e6b8f68b2e117cbbe03f29e30a2e3"></a><br/></td></tr>
<tr class="memitem:ad40d34bcd8520f64bb073fae4a08878e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad40d34bcd8520f64bb073fae4a08878e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#ad40d34bcd8520f64bb073fae4a08878e">nav_periodic_task</a> (void)</td></tr>
<tr class="memdesc:ad40d34bcd8520f64bb073fae4a08878e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Navigation main: call to the code generated from the XML flight plan. <br/></td></tr>
<tr class="memitem:a64a3814d1672e69989f80701a0ff5749"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64a3814d1672e69989f80701a0ff5749"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#a64a3814d1672e69989f80701a0ff5749">nav_init</a> (void)</td></tr>
<tr class="memdesc:a64a3814d1672e69989f80701a0ff5749"><td class="mdescLeft">&#160;</td><td class="mdescRight">Navigation Initialisation. <br/></td></tr>
<tr class="memitem:ab746572e63956a2ad40674328a85b029"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#ab746572e63956a2ad40674328a85b029">nav_without_gps</a> (void)</td></tr>
<tr class="memdesc:ab746572e63956a2ad40674328a85b029"><td class="mdescLeft">&#160;</td><td class="mdescRight">Failsafe navigation without position estimation.  <a href="#ab746572e63956a2ad40674328a85b029"></a><br/></td></tr>
<tr class="memitem:ae9a835aee8c0898c8c5c65190d0b30bc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae9a835aee8c0898c8c5c65190d0b30bc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>nav_eight_init</b> (void)</td></tr>
<tr class="memitem:a289c72677bdc1d6a83aa2cd266335601"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#a289c72677bdc1d6a83aa2cd266335601">nav_eight</a> (uint8_t target, uint8_t c1, float radius)</td></tr>
<tr class="memdesc:a289c72677bdc1d6a83aa2cd266335601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Navigation along a figure 8.  <a href="#a289c72677bdc1d6a83aa2cd266335601"></a><br/></td></tr>
<tr class="memitem:aa602ef7f7d2e485655a7cc97a35b80c3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa602ef7f7d2e485655a7cc97a35b80c3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>nav_oval_init</b> (void)</td></tr>
<tr class="memitem:ae660519c2f89e1c5f9aac7877f1e46e6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae660519c2f89e1c5f9aac7877f1e46e6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>nav_oval</b> (uint8_t p1, uint8_t p2, float radius)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a80cf41be180b9c15f127bcbee731fb9b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80cf41be180b9c15f127bcbee731fb9b"></a>
enum oval_status&#160;</td><td class="memItemRight" valign="bottom"><b>oval_status</b></td></tr>
<tr class="memitem:ab2e97613bcf8e5721e639812c7a3469a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2e97613bcf8e5721e639812c7a3469a"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>last_x</b></td></tr>
<tr class="memitem:a38c13a13ef3e5a3b6480f71bf244e668"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a38c13a13ef3e5a3b6480f71bf244e668"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>last_y</b></td></tr>
<tr class="memitem:a280519e0d643e2e7ec41137b887d0b31"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#a280519e0d643e2e7ec41137b887d0b31">last_wp</a></td></tr>
<tr class="memdesc:a280519e0d643e2e7ec41137b887d0b31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of last waypoint.  <a href="#a280519e0d643e2e7ec41137b887d0b31"></a><br/></td></tr>
<tr class="memitem:ad1a9450df5c62410ea50a3e36aa963f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad1a9450df5c62410ea50a3e36aa963f1"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>rc_pitch</b></td></tr>
<tr class="memitem:a2bece6794aadefe30136dcd27b721f53"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2bece6794aadefe30136dcd27b721f53"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>carrot_x</b></td></tr>
<tr class="memitem:a433f78b82598ad1380701b8b4e376632"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a433f78b82598ad1380701b8b4e376632"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>carrot_y</b></td></tr>
<tr class="memitem:ae53708a0be0d9df410749c81a8458d6f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae53708a0be0d9df410749c81a8458d6f"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#ae53708a0be0d9df410749c81a8458d6f">nav_circle_radians</a></td></tr>
<tr class="memdesc:ae53708a0be0d9df410749c81a8458d6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status on the current circle. <br/></td></tr>
<tr class="memitem:aa10361692f333adcd1ccfd84ff1d0974"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa10361692f333adcd1ccfd84ff1d0974"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_circle_trigo_qdr</b></td></tr>
<tr class="memitem:a4e73a18879f679277a72ef00250e359e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4e73a18879f679277a72ef00250e359e"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_radius</b></td></tr>
<tr class="memitem:af90efaefda837fe910e6c1d55ea0e949"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af90efaefda837fe910e6c1d55ea0e949"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#af90efaefda837fe910e6c1d55ea0e949">nav_course</a></td></tr>
<tr class="memdesc:af90efaefda837fe910e6c1d55ea0e949"><td class="mdescLeft">&#160;</td><td class="mdescRight">with #INT32_ANGLE_FRAC <br/></td></tr>
<tr class="memitem:a45139c6cf4dbda18870cf748337fbea7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a45139c6cf4dbda18870cf748337fbea7"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_climb</b></td></tr>
<tr class="memitem:aae62d3a760ee0f535ee7bf9131df6d9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aae62d3a760ee0f535ee7bf9131df6d9c"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_shift</b></td></tr>
<tr class="memitem:a620eee3565104705439b86c0011d5ce5"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#a620eee3565104705439b86c0011d5ce5">nav_leg_progress</a></td></tr>
<tr class="memdesc:a620eee3565104705439b86c0011d5ce5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status on the current leg (percentage, 0.  <a href="#a620eee3565104705439b86c0011d5ce5"></a><br/></td></tr>
<tr class="memitem:aacf1866dff03a2d6eba27ddefae85636"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aacf1866dff03a2d6eba27ddefae85636"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#aacf1866dff03a2d6eba27ddefae85636">nav_leg_length</a></td></tr>
<tr class="memdesc:aacf1866dff03a2d6eba27ddefae85636"><td class="mdescLeft">&#160;</td><td class="mdescRight">length of the current leg (m) <br/></td></tr>
<tr class="memitem:a3d597a1b316fdba0db5701a03ad56c7b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d597a1b316fdba0db5701a03ad56c7b"></a>
bool_t&#160;</td><td class="memItemRight" valign="bottom"><b>nav_in_circle</b> = FALSE</td></tr>
<tr class="memitem:a70c77743e83862b67b86056fcc80a8ec"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a70c77743e83862b67b86056fcc80a8ec"></a>
bool_t&#160;</td><td class="memItemRight" valign="bottom"><b>nav_in_segment</b> = FALSE</td></tr>
<tr class="memitem:ac1af27920d41a6dbc343fc1d7f55e08c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac1af27920d41a6dbc343fc1d7f55e08c"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_circle_x</b></td></tr>
<tr class="memitem:a7b01191b794559f9d485b67c2be62c39"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b01191b794559f9d485b67c2be62c39"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_circle_y</b></td></tr>
<tr class="memitem:a3e545eca284b674d03e90c15f58e1ff4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e545eca284b674d03e90c15f58e1ff4"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_circle_radius</b></td></tr>
<tr class="memitem:a8b5c072e3f61f9025578e3e6283ffcb1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8b5c072e3f61f9025578e3e6283ffcb1"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_segment_x_1</b></td></tr>
<tr class="memitem:aa04e457095198f649868d28f72969029"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa04e457095198f649868d28f72969029"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_segment_y_1</b></td></tr>
<tr class="memitem:a123af850aca7872d4ae1f0fd561fc302"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a123af850aca7872d4ae1f0fd561fc302"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_segment_x_2</b></td></tr>
<tr class="memitem:a2992c5b1e4da4284068a225e451877a4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2992c5b1e4da4284068a225e451877a4"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_segment_y_2</b></td></tr>
<tr class="memitem:ad2a5195a657a7961bfb54e3c2da48a21"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad2a5195a657a7961bfb54e3c2da48a21"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>horizontal_mode</b></td></tr>
<tr class="memitem:a421ee656b2e10a372b13bddc4bf546b3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a421ee656b2e10a372b13bddc4bf546b3"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>circle_bank</b> = 0</td></tr>
<tr class="memitem:a1612ea0e1474e49b800cb3f497096523"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1612ea0e1474e49b800cb3f497096523"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#a1612ea0e1474e49b800cb3f497096523">flight_altitude</a></td></tr>
<tr class="memdesc:a1612ea0e1474e49b800cb3f497096523"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamically adjustable, reset to nav_altitude when it is changing. <br/></td></tr>
<tr class="memitem:a0ac0aec8bffae1d911b4f2fa5e2be72b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ac0aec8bffae1d911b4f2fa5e2be72b"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_glide_pitch_trim</b></td></tr>
<tr class="memitem:aeaf31d3e1ac7e38949cd2b45ea2ce21e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeaf31d3e1ac7e38949cd2b45ea2ce21e"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_ground_speed_setpoint</b></td></tr>
<tr class="memitem:a4088688165aca8cabadaf45fb0b44643"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4088688165aca8cabadaf45fb0b44643"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_ground_speed_pgain</b></td></tr>
<tr class="memitem:ad07af37c66417d0eac97740c696ace0d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad07af37c66417d0eac97740c696ace0d"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_survey_shift</b></td></tr>
<tr class="memitem:aeb19008e34a80086cfcb00ae5ae32fdd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeb19008e34a80086cfcb00ae5ae32fdd"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_survey_west</b></td></tr>
<tr class="memitem:a1709471dbc0af61015c59e136100e118"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1709471dbc0af61015c59e136100e118"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_survey_east</b></td></tr>
<tr class="memitem:a4bd5ccc05012fbe9ba362b941aea7294"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4bd5ccc05012fbe9ba362b941aea7294"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_survey_north</b></td></tr>
<tr class="memitem:a5bd732618e35c5a855ef4e0549f733f0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5bd732618e35c5a855ef4e0549f733f0"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_survey_south</b></td></tr>
<tr class="memitem:a68393cb43ffff9bfff53cce34d108e38"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a68393cb43ffff9bfff53cce34d108e38"></a>
bool_t&#160;</td><td class="memItemRight" valign="bottom"><b>nav_survey_active</b></td></tr>
<tr class="memitem:a100095dcf201264924107b608a3ed5cd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a100095dcf201264924107b608a3ed5cd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>nav_mode</b></td></tr>
<tr class="memitem:a04b783250b1673126fa3f4729cb2078e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a04b783250b1673126fa3f4729cb2078e"></a>
static unit_t&#160;</td><td class="memItemRight" valign="bottom"><b>unit</b></td></tr>
<tr class="memitem:a09096c05260cf7f225d988b6297168c0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a09096c05260cf7f225d988b6297168c0"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><b>baseleg_out_qdr</b></td></tr>
<tr class="memitem:a67342fe7d0a993249d4b4cd0e20821ce"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a67342fe7d0a993249d4b4cd0e20821ce"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>nav_altitude</b> = GROUND_ALT + MIN_HEIGHT_CARROT</td></tr>
<tr class="memitem:a88f523b73a294f7cb312604f212c21ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88f523b73a294f7cb312604f212c21ab"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>desired_x</b></td></tr>
<tr class="memitem:ab7d49633159601ed2eaa65f23d612805"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab7d49633159601ed2eaa65f23d612805"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>desired_y</b></td></tr>
<tr class="memitem:a5eb16c9d058ba78537ddf42c2ace1075"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5eb16c9d058ba78537ddf42c2ace1075"></a>
pprz_t&#160;</td><td class="memItemRight" valign="bottom"><b>nav_throttle_setpoint</b></td></tr>
<tr class="memitem:ac1ac32b055c0a7879329346b1662f313"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac1ac32b055c0a7879329346b1662f313"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#ac1ac32b055c0a7879329346b1662f313">nav_pitch</a></td></tr>
<tr class="memdesc:ac1ac32b055c0a7879329346b1662f313"><td class="mdescLeft">&#160;</td><td class="mdescRight">with #INT32_ANGLE_FRAC <br/></td></tr>
<tr class="memitem:a737a463b508f62286a0e62c5ed5648b4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a737a463b508f62286a0e62c5ed5648b4"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>fp_pitch</b></td></tr>
<tr class="memitem:af4a85437e319605798991baf6a5c1b4b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af4a85437e319605798991baf6a5c1b4b"></a>
static enum eight_status&#160;</td><td class="memItemRight" valign="bottom"><b>eight_status</b></td></tr>
<tr class="memitem:a3f8eab6736191ca3d1cb16738cbcf97f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nav_8c.html#a3f8eab6736191ca3d1cb16738cbcf97f">nav_oval_count</a></td></tr>
<tr class="memdesc:a3f8eab6736191ca3d1cb16738cbcf97f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Navigation along a figure O.  <a href="#a3f8eab6736191ca3d1cb16738cbcf97f"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Regroup functions to compute navigation. </p>

<p>Definition in file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="a2a52a892a193bd2f3d2f86d1b1ded87e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Goto3D</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">radius</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ \</div>
<div class="line">  if (pprz_mode == PPRZ_MODE_AUTO2) { \</div>
<div class="line">    int16_t yaw = fbw_state-&gt;channels[RADIO_YAW]; \</div>
<div class="line">    if (yaw &gt; MIN_DX || yaw &lt; -MIN_DX) { \</div>
<div class="line">      carrot_x += FLOAT_OF_PPRZ(yaw, 0, -20.); \</div>
<div class="line">      carrot_x = Min(carrot_x, MAX_DIST_CARROT); \</div>
<div class="line">      carrot_x = Max(carrot_x, -MAX_DIST_CARROT); \</div>
<div class="line">    } \</div>
<div class="line">    int16_t pitch = fbw_state-&gt;channels[RADIO_PITCH]; \</div>
<div class="line">    if (pitch &gt; MIN_DX || pitch &lt; -MIN_DX) { \</div>
<div class="line">      carrot_y += FLOAT_OF_PPRZ(pitch, 0, -20.); \</div>
<div class="line">      carrot_y = Min(carrot_y, MAX_DIST_CARROT); \</div>
<div class="line">      carrot_y = Max(carrot_y, -MAX_DIST_CARROT); \</div>
<div class="line">    } \</div>
<div class="line">    v_ctl_mode = V_CTL_MODE_AUTO_ALT; \</div>
<div class="line">    int16_t roll =  fbw_state-&gt;channels[RADIO_ROLL]; \</div>
<div class="line">    if (roll &gt; MIN_DX || roll &lt; -MIN_DX) { \</div>
<div class="line">      nav_altitude += FLOAT_OF_PPRZ(roll, 0, -1.0); \</div>
<div class="line">      nav_altitude = Max(nav_altitude, MIN_HEIGHT_CARROT+ground_alt); \</div>
<div class="line">      nav_altitude = Min(nav_altitude, MAX_HEIGHT_CARROT+ground_alt); \</div>
<div class="line">    } \</div>
<div class="line">  } \</div>
<div class="line">  nav_circle_XY(carrot_x, carrot_y, radius); \</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="nav_8c_source.html#l00164">164</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa7303abf34661cdf531cce2f4fddfe86"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NavGlide</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_last_wp, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_wp&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ \</div>
<div class="line">  float start_alt = waypoints[_last_wp].a; \</div>
<div class="line">  float diff_alt = waypoints[_wp].a - start_alt; \</div>
<div class="line">  float alt = start_alt + <a class="code" href="nav_8c.html#a620eee3565104705439b86c0011d5ce5" title="Status on the current leg (percentage, 0.">nav_leg_progress</a> * diff_alt; \</div>
<div class="line">  float pre_climb = (*<a class="code" href="group__state__velocity.html#ga29dc407c432a84bed993054af670cf4a" title="Get norm of horizontal ground speed (float).">stateGetHorizontalSpeedNorm_f</a>()) * diff_alt / <a class="code" href="nav_8c.html#aacf1866dff03a2d6eba27ddefae85636" title="length of the current leg (m)">nav_leg_length</a>; \</div>
<div class="line">  NavVerticalAltitudeMode(alt, pre_climb); \</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="nav_8c_source.html#l00149">149</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="a771b907350b836982ba4e31fd4bcbf4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool_t nav_approaching_xy </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>from_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>from_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>approaching_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decide if the UAV is approaching the current waypoint. </p>
<p>Computes <em>dist2_to_wp</em> and compare it to square <em>carrot</em>. Return true if it is smaller. Else computes by scalar products if uav has not gone past waypoint. Return true if it is the case. </p>
<p>distance to waypoint in x</p>
<p>distance to waypoint in y </p>

<p>Definition at line <a class="el" href="nav_8c_source.html#l00312">312</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

<p>References <a class="el" href="state_8h_source.html#l00863">stateGetHorizontalSpeedNorm_f()</a>, <a class="el" href="state_8h_source.html#l00681">stateGetPositionEnu_f()</a>, <a class="el" href="pprz__geodetic__float_8h_source.html#l00073">EnuCoor_f::x</a>, and <a class="el" href="pprz__geodetic__float_8h_source.html#l00074">EnuCoor_f::y</a>.</p>

<p>Referenced by <a class="el" href="nav_8c_source.html#l00486">nav_eight()</a>.</p>

<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c_a771b907350b836982ba4e31fd4bcbf4b_cgraph.png" border="0" usemap="#nav_8c_a771b907350b836982ba4e31fd4bcbf4b_cgraph" alt=""/></div>
<map name="nav_8c_a771b907350b836982ba4e31fd4bcbf4b_cgraph" id="nav_8c_a771b907350b836982ba4e31fd4bcbf4b_cgraph">
<area shape="rect" id="node3" href="group__state__velocity.html#ga29dc407c432a84bed993054af670cf4a" title="Get norm of horizontal ground speed (float)." alt="" coords="207,5,436,35"/><area shape="rect" id="node5" href="group__state__position.html#ga545d479db45e1a9711e59736b6d1309b" title="Get position in local ENU coordinates (float)." alt="" coords="240,59,403,88"/></map>
</div>
</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c_a771b907350b836982ba4e31fd4bcbf4b_icgraph.png" border="0" usemap="#nav_8c_a771b907350b836982ba4e31fd4bcbf4b_icgraph" alt=""/></div>
<map name="nav_8c_a771b907350b836982ba4e31fd4bcbf4b_icgraph" id="nav_8c_a771b907350b836982ba4e31fd4bcbf4b_icgraph">
<area shape="rect" id="node3" href="nav_8h.html#a083964068940390afc5e6621f015c19f" title="Navigation along a figure 8." alt="" coords="207,5,289,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad1b9d2e8da4a32477ca8bedc0bca86fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nav_circle_XY </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Navigates around (x, y). </p>
<p>Angle from center to mobile.</p>
<p>Clockwise iff radius &gt; 0 </p>
<p>Computes a prebank. Go straight if inside or outside the circle </p>

<p>Definition at line <a class="el" href="nav_8c_source.html#l00106">106</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

<p>References <a class="el" href="nav_8c_source.html#l00333">fly_to_xy()</a>, <a class="el" href="state_8h_source.html#l00863">stateGetHorizontalSpeedNorm_f()</a>, <a class="el" href="state_8h_source.html#l00681">stateGetPositionEnu_f()</a>, <a class="el" href="pprz__geodetic__float_8h_source.html#l00073">EnuCoor_f::x</a>, and <a class="el" href="pprz__geodetic__float_8h_source.html#l00074">EnuCoor_f::y</a>.</p>

<p>Referenced by <a class="el" href="nav_8c_source.html#l00486">nav_eight()</a>.</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c_ad1b9d2e8da4a32477ca8bedc0bca86fe_cgraph.png" border="0" usemap="#nav_8c_ad1b9d2e8da4a32477ca8bedc0bca86fe_cgraph" alt=""/></div>
<map name="nav_8c_ad1b9d2e8da4a32477ca8bedc0bca86fe_cgraph" id="nav_8c_ad1b9d2e8da4a32477ca8bedc0bca86fe_cgraph">
<area shape="rect" id="node3" href="nav_8c.html#ae9d11d2e378b23ecbee86419cbf341f0" title="Computes desired_x, desired_y and desired_course." alt="" coords="160,59,237,88"/><area shape="rect" id="node5" href="group__state__position.html#ga545d479db45e1a9711e59736b6d1309b" title="Get position in local ENU coordinates (float)." alt="" coords="320,5,483,35"/><area shape="rect" id="node9" href="group__state__velocity.html#ga29dc407c432a84bed993054af670cf4a" title="Get norm of horizontal ground speed (float)." alt="" coords="287,112,516,141"/><area shape="rect" id="node7" href="group__state__velocity.html#gaf16409f23300380a2a5a84cb77f5305a" title="Get dir of horizontal ground speed (float)." alt="" coords="295,59,508,88"/></map>
</div>
</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c_ad1b9d2e8da4a32477ca8bedc0bca86fe_icgraph.png" border="0" usemap="#nav_8c_ad1b9d2e8da4a32477ca8bedc0bca86fe_icgraph" alt=""/></div>
<map name="nav_8c_ad1b9d2e8da4a32477ca8bedc0bca86fe_icgraph" id="nav_8c_ad1b9d2e8da4a32477ca8bedc0bca86fe_icgraph">
<area shape="rect" id="node3" href="nav_8h.html#a083964068940390afc5e6621f015c19f" title="Navigation along a figure 8." alt="" coords="161,5,244,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a289c72677bdc1d6a83aa2cd266335601"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nav_eight </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Navigation along a figure 8. </p>
<p>The cross center is defined by the waypoint [target], the center of one of the circles is defined by [c1]. Altitude is given by [target]. The navigation goes through 6 states: C1 (circle around [c1]), R1T, RT2 (route from circle 1 to circle 2 over [target]), C2 and R2T, RT1. If necessary, the [c1] waypoint is moved in the direction of [target] to be not far than [2*radius]. </p>

<p>Definition at line <a class="el" href="nav_8c_source.html#l00486">486</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

<p>References <a class="el" href="nav_8c_source.html#l00312">nav_approaching_xy()</a>, <a class="el" href="nav_8c_source.html#l00106">nav_circle_XY()</a>, <a class="el" href="nav_8c_source.html#l00357">nav_route_xy()</a>, and <a class="el" href="nav_8h_source.html#l00131">NavQdrCloseTo</a>.</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c_a289c72677bdc1d6a83aa2cd266335601_cgraph.png" border="0" usemap="#nav_8c_a289c72677bdc1d6a83aa2cd266335601_cgraph" alt=""/></div>
<map name="nav_8c_a289c72677bdc1d6a83aa2cd266335601_cgraph" id="nav_8c_a289c72677bdc1d6a83aa2cd266335601_cgraph">
<area shape="rect" id="node3" href="nav_8c.html#a771b907350b836982ba4e31fd4bcbf4b" title="Decide if the UAV is approaching the current waypoint." alt="" coords="293,188,445,217"/><area shape="rect" id="node9" href="nav_8c.html#ad1b9d2e8da4a32477ca8bedc0bca86fe" title="Navigates around (x, y)." alt="" coords="139,86,245,116"/><area shape="rect" id="node19" href="nav_8c.html#ab4247c9f3dc0417690e1404add032cbe" title="Computes the carrot position along the desired segment." alt="" coords="139,33,245,62"/><area shape="rect" id="node5" href="group__state__velocity.html#ga29dc407c432a84bed993054af670cf4a" title="Get norm of horizontal ground speed (float)." alt="" coords="495,137,724,166"/><area shape="rect" id="node7" href="group__state__position.html#ga545d479db45e1a9711e59736b6d1309b" title="Get position in local ENU coordinates (float)." alt="" coords="528,84,691,113"/><area shape="rect" id="node11" href="nav_8c.html#ae9d11d2e378b23ecbee86419cbf341f0" title="Computes desired_x, desired_y and desired_course." alt="" coords="331,33,408,62"/><area shape="rect" id="node14" href="group__state__velocity.html#gaf16409f23300380a2a5a84cb77f5305a" title="Get dir of horizontal ground speed (float)." alt="" coords="503,30,716,60"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a069e6b8f68b2e117cbbe03f29e30a2e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nav_home </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Home mode navigation (circle around HOME) </p>
<p>Nominal speed </p>

<p>Definition at line <a class="el" href="nav_8c_source.html#l00394">394</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

<p>Referenced by <a class="el" href="main__ap_8c_source.html#l00403">navigation_task()</a>.</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c_a069e6b8f68b2e117cbbe03f29e30a2e3_icgraph.png" border="0" usemap="#nav_8c_a069e6b8f68b2e117cbbe03f29e30a2e3_icgraph" alt=""/></div>
<map name="nav_8c_a069e6b8f68b2e117cbbe03f29e30a2e3_icgraph" id="nav_8c_a069e6b8f68b2e117cbbe03f29e30a2e3_icgraph">
<area shape="rect" id="node3" href="main__ap_8h.html#a79f823520ea0823e20084686978281e6" title="Compute desired_course." alt="" coords="144,5,267,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab4247c9f3dc0417690e1404add032cbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nav_route_xy </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>last_wp_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>last_wp_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>wp_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>wp_y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the carrot position along the desired segment. </p>
<p>distance of carrot (in meter) </p>

<p>Definition at line <a class="el" href="nav_8c_source.html#l00357">357</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

<p>References <a class="el" href="nav_8c_source.html#l00333">fly_to_xy()</a>, <a class="el" href="state_8h_source.html#l00681">stateGetPositionEnu_f()</a>, <a class="el" href="pprz__geodetic__float_8h_source.html#l00073">EnuCoor_f::x</a>, and <a class="el" href="pprz__geodetic__float_8h_source.html#l00074">EnuCoor_f::y</a>.</p>

<p>Referenced by <a class="el" href="nav_8c_source.html#l00486">nav_eight()</a>.</p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c_ab4247c9f3dc0417690e1404add032cbe_cgraph.png" border="0" usemap="#nav_8c_ab4247c9f3dc0417690e1404add032cbe_cgraph" alt=""/></div>
<map name="nav_8c_ab4247c9f3dc0417690e1404add032cbe_cgraph" id="nav_8c_ab4247c9f3dc0417690e1404add032cbe_cgraph">
<area shape="rect" id="node3" href="nav_8c.html#ae9d11d2e378b23ecbee86419cbf341f0" title="Computes desired_x, desired_y and desired_course." alt="" coords="160,59,237,88"/><area shape="rect" id="node5" href="group__state__position.html#ga545d479db45e1a9711e59736b6d1309b" title="Get position in local ENU coordinates (float)." alt="" coords="320,5,483,35"/><area shape="rect" id="node7" href="group__state__velocity.html#gaf16409f23300380a2a5a84cb77f5305a" title="Get dir of horizontal ground speed (float)." alt="" coords="295,59,508,88"/><area shape="rect" id="node9" href="group__state__velocity.html#ga29dc407c432a84bed993054af670cf4a" title="Get norm of horizontal ground speed (float)." alt="" coords="287,112,516,141"/></map>
</div>
</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c_ab4247c9f3dc0417690e1404add032cbe_icgraph.png" border="0" usemap="#nav_8c_ab4247c9f3dc0417690e1404add032cbe_icgraph" alt=""/></div>
<map name="nav_8c_ab4247c9f3dc0417690e1404add032cbe_icgraph" id="nav_8c_ab4247c9f3dc0417690e1404add032cbe_icgraph">
<area shape="rect" id="node3" href="nav_8h.html#a083964068940390afc5e6621f015c19f" title="Navigation along a figure 8." alt="" coords="161,5,244,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab746572e63956a2ad40674328a85b029"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nav_without_gps </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Failsafe navigation without position estimation. </p>
<p>Just set attitude and throttle to FAILSAFE values to prevent the plane from crashing. </p>

<p>Definition at line <a class="el" href="nav_8c_source.html#l00452">452</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

<p>Referenced by <a class="el" href="main__ap_8c_source.html#l00403">navigation_task()</a>.</p>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="nav_8c_ab746572e63956a2ad40674328a85b029_icgraph.png" border="0" usemap="#nav_8c_ab746572e63956a2ad40674328a85b029_icgraph" alt=""/></div>
<map name="nav_8c_ab746572e63956a2ad40674328a85b029_icgraph" id="nav_8c_ab746572e63956a2ad40674328a85b029_icgraph">
<area shape="rect" id="node3" href="main__ap_8h.html#a79f823520ea0823e20084686978281e6" title="Compute desired_course." alt="" coords="181,5,304,35"/></map>
</div>
</p>

</div>
</div>
<h2>Variable Documentation</h2>
<a class="anchor" id="a280519e0d643e2e7ec41137b887d0b31"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t last_wp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index of last waypoint. </p>
<p>Used only in "go" stage in "route" horiz mode </p>

<p>Definition at line <a class="el" href="nav_8c_source.html#l00045">45</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

</div>
</div>
<a class="anchor" id="a620eee3565104705439b86c0011d5ce5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float nav_leg_progress</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Status on the current leg (percentage, 0. </p>
<p>&lt; &lt; 1.) in route mode </p>

<p>Definition at line <a class="el" href="nav_8c_source.html#l00057">57</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3f8eab6736191ca3d1cb16738cbcf97f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t nav_oval_count</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Navigation along a figure O. </p>
<p>One side leg is defined by waypoints [p1] and [p2]. The navigation goes through 4 states: OC1 (half circle next to [p1]), OR21 (route [p2] to [p1], OC2 (half circle next to [p2]) and OR12 (opposite leg).</p>
<p>Initial state is the route along the desired segment (OC2). </p>

<p>Definition at line <a class="el" href="nav_8c_source.html#l00600">600</a> of file <a class="el" href="nav_8c_source.html">nav.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_12d6ec7aac5a4a9b8cee17e35022d7c7.html">subsystems</a></li><li class="navelem"><a class="el" href="nav_8c.html">nav.c</a></li>
    <li class="footer">Generated on Thu Jan 17 2013 14:39:38 for Paparazzi UAS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
